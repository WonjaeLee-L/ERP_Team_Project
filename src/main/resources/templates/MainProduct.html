<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="import" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</head>
<style>
    body {
        background-color: #f5f5f5;
    }

    header {
        width: 100%;
        height: 100px;
        border: 1px solid;
        background-color: #9fc79f;
    }

    .welcome-message {
        position: relative;
        top: 60px;
        left: 1510px;
        font-size: 20px;
        font-weight: 400;
    }

    .logo {
        float: left;
        text-align: center;
        width: 200px;
        height: 30%;
        padding-top: 13px;
        font-size: 20px;
    }

    footer {
        width: 98.9%;
        position: absolute;
        bottom: 0px;
        height: 100px;
        border: 1px solid;
        text-align: center;
        font-size: 50px;
    }

    nav {
        height: 1103px;
        /*display: inline-block;*/
        float: left;
        width: 200px;
        border: 1px solid black;
    }

    .dropdown {
        position: relative;
        display: inline-block;
    }

    .dropbtn_icon {
        font-family: 'Material Icons';
    }

    .dropbtn {
        font-weight: 400;
        color: rgb(37, 37, 37);
        padding: 15px;
        width: 200px;
        text-align: center;
        cursor: pointer;
        font-size: 20px;
        background-color: #9fc79f;

    }

    .dropdown-content {
        display: none;
        position: absolute;
        z-index: 1;
        font-weight: 400;
        min-width: 200px;
        background-color: #cfedcb;
    }

    .dropdown-content a {
        display: block;
        text-decoration: none;
        color: rgb(37, 37, 37);
        font-size: 17px;
        padding: 12px 20px;
        text-align: center;
        border-bottom: 1px solid black;
    }

    .dropdown-content a:hover {
        background-color: #9fc79f;
    }

    .dropdown:hover .dropdown-content {
        display: flow;
    }

    Section {
        width: 1672.3px;
        height: 1104px;
        border: 1px solid black;
        float: left;
        /*display: inline-block;*/
    }

    .tabs {
        list-style-type: none;
        padding: 0px;
        display: flex;
    }

    .tabs li {
        padding: 10px;
        background-color: #ddd;
        margin-left: 10px;
        cursor: pointer;
    }

    .tabs li:hover {
        background-color: #ccc;
    }

    .tab-content {
        display: none;
        padding: 15px;
        background-color: #f9f9f9;
    }

    .modalbtn {
        border: none;
        display: block;
        text-align: center;
        cursor: pointer;
        text-transform: uppercase;
        outline: none;
        overflow: hidden;
        position: relative;
        color: #fff;
        font-weight: 700;
        font-size: 15px;
        background-color: #222;
        padding: 17px 60px;
        margin: 0 auto;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.20);
    }

    .fileBox .uploadFile {
        display: inline-block;
        height: 40px;
        padding: 0 10px;
        vertical-align: middle;
        border: 1px solid #dddddd;
        width: 78%;
        color: #999999;
    }

    .fileBox label {
        display: inline-block;
        padding: 10px 20px;
        color: #fff;
        vertical-align: middle;
        background-color: #999999;
        cursor: pointer;
        height: 40px;
        margin-left: 10px;
    }

    .fileBox input[type="file"] {
        position: absolute;
        width: 0;
        height: 0;
        padding: 0;
        overflow: hidden;
        border: 0;
    }

    th.product_table {
        background: #42444e;
        color: #fff;
        text-align: left;
    }

    th.product_table, td.product_table {
        padding: 6px 15px;
    }

    td.product_table {
        border-right: 1px solid #c6c9cc;
        border-bottom: 1px solid #c6c9cc;
    }

    tr.product_table:hover {
        border-right: 1px solid #c6c9cc;
        border-bottom: 1px solid #c6c9cc;
        background: bisque;
    }

    tr:nth-child(even) {
        background: #eaeaed;
    }

    table.product_table {
        border-collapse: separate;
        border-spacing: 0;
        width: 100%;
    }

    .select_product, .select_group {
        width: 100%;
        height: 64px;
        position: absolute;
        top: 0;
        left: 0;
        z-index: 1;
        font-size: 22px;
        border: none;
        background: transparent;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        cursor: pointer;
        padding: 5px 15px;
    }

    .select_product option, .select_group {
        font-size: 22px;
        background: #fff;
    }

    .select_group {
        height: 64px;
        margin-bottom: 15px;
        position: relative;
    }

</style>
<body>
<header>
    <div class="logo">
        <img src="../image/logo.png" height="80" width="150"/>
    </div>
    <div class="welcome-message">님!! 환영합니다!!</div>
</header>
<nav>
    <br>
    <div class="dropdown">
        <button class="dropbtn">
            <span class="dropbtn_icon">인사관리</span>
        </button>
        <div class="dropdown-content">
            <a href="#employee.html" onclick="openTab('사원 등록')">사원 등록</a>
            <a href="#" onclick="openTab('사원 수정')">사원 수정</a>
            <a href="#">사원 삭제</a>
            <a href="#">사원 전체보기</a>
            <a href="#">사원 근태보기</a>
        </div>
    </div>
    <br>
    <br>
    <div class="dropdown">
        <button class="dropbtn">
            <span class="dropbtn_icon">상품관리</span>
        </button>
        <div class="dropdown-content">
            <!--            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addProduct">-->
            <!--                물품 등록-->
            <!--            </button>-->
            <!--            <button type="button" class="btn btn-primary" data-bs-target="#idid">모달버튼</button>-->
            <a href="#">상품 등록</a>
            <a href="#">상품 수정</a>
            <a href="#">상품 삭제</a>
            <a href="#">상품 전체보기</a>
            <a href="#">창고 관리</a>
        </div>
    </div>
    <br>
    <br>
    <div class="dropdown">
        <button class="dropbtn">
            <span class="dropbtn_icon">거래처관리</span>
        </button>
        <div class="dropdown-content">
            <a href="#">거래처 등록</a>
            <a href="#">거래처 수정</a>
            <a href="#">거래처 삭제</a>
            <a href="#">거래처 전체보기</a>
        </div>
    </div>
    <br>
    <br>
    <div class="dropdown">
        <button class="dropbtn">
            <span class="dropbtn_icon">입고</span>
        </button>
        <div class="dropdown-content">
            <a href="#">입고 등록</a>
            <a href="#">입고 수정</a>
            <a href="#">입고 삭제</a>
            <a href="#">입고 확정</a>
        </div>
    </div>
    <br>
    <br>
    <div class="dropdown">
        <button class="dropbtn">
            <span class="dropbtn_icon">출고 / 반품</span>
        </button>
        <div class="dropdown-content">
            <a href="#">출고 등록</a>
            <a href="#">출고 수정</a>
            <a href="#">출고 삭제</a>
            <a href="#">반품 등록</a>
            <a href="#">반품 수정</a>
            <a href="#">반품 삭제</a>
        </div>
    </div>
    <br>
    <br>
    <div class="dropdown">
        <button class="dropbtn">
            <span class="dropbt n_icon">재고</span>
        </button>
        <div class="dropdown-content">
            <a href="#">재고 수불</a>
            <a href="#">재고 조회</a>
        </div>
    </div>
    <br>
    <br>
    <div class="dropdown">
        <button class="dropbtn">
            <span class="dropbt n_icon">회계관리</span>
        </button>
        <div class="dropdown-content">
            <a href="#">전표 등록</a>
            <a href="#">결제 승인 대기</a>
            <a href="#">전표 관리</a>
            <a href="#">손익 계산서</a>
        </div>
    </div>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <div class="dropdown">
        <button class="dropbtn">
            <span class="dropbt n_icon">거래처</span>
        </button>
        <div class="dropdown-content">
            <a href="#">입고 신청</a>
            <a href="#">재고 조회</a>
        </div>
    </div>
    <br>
    <br>
    <div class="dropdown">
        <button class="dropbtn">
            <span class="dropbt n_icon">게시판</span>
        </button>
        <div class="dropdown-content">
            <a href="#">게시판</a>
        </div>
    </div>
    <br>
    <br>
</nav>

<Section>

    <div class="container mt-5" style="background-color: coral">
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addProduct">
            물품 등록
        </button>
        <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#myModal2">
            Open modal2
        </button>
    </div>


    <!-- 신규 상품 등록 모달 -->
    <div class="modal" id="addProduct">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h4 class="modal-title" style="margin-left: 30px">신규 상품 등록</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <form method="post" action="product" enctype="multipart/form-data">
                    <div class="modal-body">

                        <div class="col-md-3">
                            <label for="inputCode" class="form-label">상품코드</label>
                            <input type="text" class="form-control" id="inputCode" name="product_code">
                        </div>
                        <div class="col-md-5">
                            <label for="inputProduct" class="form-label">상품명</label>
                            <input type="text" class="form-control" id="inputProduct" name="product_name">
                        </div>
                        <div class="col-md-5">
                            <label for="inputSale" class="form-label">판매가</label>
                            <input type="text" class="form-control" id="inputSale" name="sale_price">
                        </div>
                        <div class="col-md-5">
                            <label for="inputPrice" class="form-label">가격</label>
                            <input type="text" class="form-control" id="inputPrice" name="price">
                        </div>
                        <div class="col-12">
                            <label for="inputCategory" class="form-label">카테고리코드</label>
                            <input type="text" class="form-control" id="inputCategory" name="category_code">
                        </div>
                        <div class="col-12">
                            <label for="inputImg" class="form-label">이미지</label>
                            <input type="text" class="form-control" id="inputImg" name="product_img">
                        </div>
                        <div class="col-12">
                            <label for="inputExplain" class="form-label">설명</label>
                            <input type="text" class="form-control" id="inputExplain" name="product_explain">
                        </div>
                        <div class="col-md-3">
                            <label for="inputCompanyCode" class="form-label">회사코드</label>
                            <input type="text" class="form-control" id="inputCompanyCode" name="company_code">
                        </div>
                        <label class="form-label">파일 업로드</label>
                        <div class="fileBox">
                            <input class="uploadFile" value="file" placeholder="file">
                            <label for="file">찾기</label>
                            <input type="file" id="file">
                        </div>

                    </div>

                    <div class="modal-footer">
                        <input type="submit" class="modalbtn" value="물품 등록"></input>
                        <button type="button" class="modalbtn" data-bs-dismiss="modal">Close</button>
                    </div>
                </form>

            </div>
        </div>
    </div>

    <!-- 기존 상품 수정 모달 -->
    <div class="modal" id="myModal2">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h4 class="modal-title" style="margin-left: 30px">기존 상품 수정</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <form method="post" action="product" enctype="multipart/form-data">
                    <div class="modal-body">

                        <div class="col-md-3">
                            <label for="modCode" class="form-label">상품코드</label>
                            <input type="text" class="form-control" id="modCode" name="product_code">
                        </div>
                        <div class="col-md-5">
                            <label for="modProduct" class="form-label">상품명</label>
                            <input type="text" class="form-control" id="modProduct" name="product_name">
                        </div>
                        <div class="col-md-5">
                            <label for="modSale" class="form-label">판매가</label>
                            <input type="text" class="form-control" id="modSale" name="sale_price">
                        </div>
                        <div class="col-md-5">
                            <label for="modPrice" class="form-label">가격</label>
                            <input type="text" class="form-control" id="modPrice" name="price">
                        </div>
                        <div class="col-12">
                            <label for="modCategory" class="form-label">카테고리코드</label>
                            <input type="text" class="form-control" id="modCategory" name="category_code">
                        </div>
                        <div class="col-12">
                            <label for="modImg" class="form-label">이미지</label>
                            <input type="text" class="form-control" id="modImg" name="product_img">
                        </div>
                        <div class="col-12">
                            <label for="modExplain" class="form-label">설명</label>
                            <input type="text" class="form-control" id="modExplain" name="product_explain">
                        </div>
                        <div class="col-md-3">
                            <label for="modCompanyCode" class="form-label">회사코드</label>
                            <input type="text" class="form-control" id="modCompanyCode" name="company_code">
                        </div>
                        <label class="form-label">파일 업로드</label>
                        <div class="fileBox">
                            <input class="uploadFile" value="file" placeholder="file">
                            <label for="file">찾기</label>
                            <input type="file" id="file1">
                        </div>

                    </div>

                    <div class="modal-footer">
                        <input type="submit" class="modalbtn" value="물품 등록"></input>
                        <button type="button" class="modalbtn" data-bs-dismiss="modal">Close</button>
                    </div>
                </form>

            </div>
        </div>
    </div>


    <table class="product_table">
        <tr class="product_table">
            <th class="product_table">상품 코드</th>
            <th class="product_table">상품 이름</th>
            <th class="product_table">공급 가격</th>
            <th class="product_table">판매 가격</th>
            <th class="product_table">상품 분류</th>
            <th class="product_table">상품 사진</th>
            <th class="product_table">상품 설명</th>
            <th class="product_table">회사 코드</th>
        </tr>
        <!--        <tr>-->
        <!-- 회사, 분류, 이름 -->
        <!--            <th class="select_group">-->
        <!--                    <select class="select_product">-->
        <!--                        <option>1</option>-->
        <!--                        <option>2</option>-->
        <!--                        <option>3</option>-->
        <!--                    </select>-->
        <!--            </th>-->
        <!--            <th class="product_table">공급 가격</th>-->
        <!--            <th class="product_table">판매 가격</th>-->
        <!--            <th class="product_table">상품 분류</th>-->
        <!--            <th class="product_table">상품 사진</th>-->
        <!--            <th class="product_table">상품 설명</th>-->
        <!--            <th class="product_table">회사 코드</th>-->
        <!--        </tr>-->
        <tr class="product_table" th:each="data_product : ${productlist}" data-bs-toggle="modal"
            data-bs-target="myModal2">
            <td class="product_table" th:text="${data_product.product_code}"></td>
            <td class="product_table" th:text="${data_product.product_name}"></td>
            <td class="product_table" th:text="${data_product.sale_price}"></td>
            <td class="product_table" th:text="${data_product.price}"></td>
            <td class="product_table" th:text="${data_product.category_code}"></td>
            <td class="product_table" th:text="${data_product.product_img}"></td>
            <td class="product_table" th:text="${data_product.product_explain}"></td>
            <td class="product_table" th:text="${data_product.company_code}"></td>
        </tr>

    </table>
    <div>
        <form action="productoneview" method="get">
            <div class="col-md-5">
                <label for="searchProduct" class="form-label">상품명</label>
                <input type="text" id="searchProduct" name="search1">
                <input type="submit" class="modalbtn" value="물품 검색">
            </div>
        </form>
    </div>
    <table class="product_table">
        <tr class="product_table" th:each="search_product : ${productVOS}">
            <td class="product_table" th:text="${search_product.product_code}"></td>
            <td class="product_table" th:text="${search_product.product_name}"></td>
            <td class="product_table" th:text="${search_product.sale_price}"></td>
            <td class="product_table" th:text="${search_product.price}"></td>
            <td class="product_table" th:text="${search_product.category_code}"></td>
            <td class="product_table" th:text="${search_product.product_img}"></td>
            <td class="product_table" th:text="${search_product.product_explain}"></td>
            <td class="product_table" th:text="${search_product.company_code}"></td>
        </tr>
    </table>


    <div id="ex1_Result1"></div>
    <div id="ex1_Result2"></div>


</Section>
<footer>
    <div id="footer" role="contentinfo">하단</div>
</footer>
<script>
    function openTab(tabTitle) {
        const tabList = document.getElementById('tabList');
        const tabId = 'tab-' + tabTitle;

        if (!document.getElementById(tabId)) {
            const newTab = document.createElement('li');
            newTab.textContent = tabTitle;
            newTab.onclick = function () {
                showTabContent(tabId);
            };

            tabList.appendChild(newTab);

            const newTabContent = document.createElement('div');
            newTabContent.id = tabId;
            newTabContent.className = 'tab-content';
            if (tabTitle === 'employee') {
                newTabContent.innerHTML = `<iframe src="employee.html" style="width:100%; height:100%; border:none;"></iframe>`;
            } else {
                newTabContent.innerHTML = `<h3>Other Content for ${tabTitle}</h3>`;
            }

            document.getElementById('tabContentArea').appendChild(newTabContent);
        }

        showTabContent(tabId);
    }

    function showTabContent(tabId) {
        const allTabs = document.querySelectorAll('.tab-content');
        allTabs.forEach(tab => tab.style.display = 'none');

        const selectedTab = document.getElementById(tabId);
        if (selectedTab) {
            selectedTab.style.display = 'block';
        }
    }


    $(document).ready(function () {
        $(".product_table tr").click(function () {
            let str = "";
            let tdArr = []; // 배열 선언

            // 현재 클릭된 Row(<tr>)
            let tr = $(this);
            let td = tr.children();

            console.log("클릭한 Row의 모든 데이터 : " + tr.text());

            td.each(function (i) {
                tdArr.push(td.eq(i).text());
            });

            console.log("배열에 담긴 값 : " + tdArr);

            var no = td.eq(0).text();
            var name = td.eq(1).text();
            var sale_price = td.eq(2).text();
            var price = td.eq(3).text();
            var category_code = td.eq(4).text();
            var product_img = td.eq(5).text();
            var product_explain = td.eq(6).text();
            var company_code = td.eq(7).text();

            str += " * 클릭된 Row의 td값 = 상품코드: <font color='red'>" + no + "</font>" +
                ", 상품명: <font color='red'>" + name + "</font>" +
                ", 공급가격: <font color='red'>" + sale_price + "</font>" +
                ", 판매가격: <font color='red'>" + price + "</font>" +
                ", 분류코드: <font color='red'>" + category_code + "</font>" +
                ", 이미지: <font color='red'>" + product_img + "</font>" +
                ", 설명: <font color='red'>" + product_explain + "</font>" +
                ", 회사코드: <font color='red'>" + company_code + "</font>";

            $("#ex1_Result1").html(" * 클릭한 Row의 모든 데이터 = " + tr.text());
            $("#ex1_Result2").html(str);

            $.ajax({
                type: "POST",
                url: "/productmod",
                data: JSON.stringify({
                    product_code: no,
                    product_name: name,
                    sale_price: sale_price,
                    price: price,
                    category_code: category_code,
                    product_img: product_img,
                    product_explain: product_explain,
                    company_code: company_code
                }),
                contentType: "application/json; charset=utf-8",
                success: function (response) {
                    console.log("서버로 전송 성공", response);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    console.log("서버로 전송 실패", textStatus, errorThrown);
                }
            });
        });
    });
</script>
</body>
</html>